# 闭包和高阶函数

## 闭包

### 变量作用域

变量的作用域，就是指变量的有效范围。我们最常谈到的是在函数中声明的变量作用域。
当在函数中声明一个变量的时候，如果该变量前面没有带上关键字var，这个变量就会成为
全局变量，这当然是一种容易造成命名冲突的做法。
另外一种情况是用var 关键字在函数中声明变量，这时候的变量即是局部变量，只有在该函
数内部才能访问到这个变量，在函数外面是访问不到的。代码如下：

```js
var func = function() {
  var a = 1;
  alert(a)
}

func();
alert(a) //输出：Uncaught ReferenceError: a is not defined
```

在JavaScript 中，函数可以用来创造函数作用域。此时的函数像一层半透明的玻璃，在函数
里面可以看到外面的变量，而在函数外面则无法看到函数里面的变量。这是因为当在函数中搜索
一个变量的时候，如果该函数内并没有声明这个变量，那么此次搜索的过程会随着代码执行环境
创建的作用域链往外层逐层搜索，一直搜索到全局对象为止。变量的搜索是**从内到外**而非从外到
内的。

```js
var a = 1;
var func1 = function(){
  var b = 2;
  var func2 = function(){
    var c = 3;
    alert ( b ); // 输出：2
    alert ( a ); // 输出：1
  }
  func2();
  alert ( c ); // 输出：Uncaught ReferenceError: c is not defined
};

func1();
```

### 变量的生存周期

除了变量的作用域之外，另外一个跟闭包有关的概念是变量的生存周期。

对于全局变量来说，全局变量的生存周期当然是永久的，除非我们主动销毁这个全局变量。
而对于在函数内用var 关键字声明的局部变量来说，当退出函数时，这些局部变量即失去了
它们的价值，它们都会随着函数调用的结束而被销毁：

```js
var func = function(){
  var a = 1; // 退出函数后局部变量a 将被销毁
  alert ( a );
};
func();
```